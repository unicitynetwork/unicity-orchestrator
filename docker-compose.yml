services:
  orchestrator:
    build:
      context: .
    environment:
      # Tell the orchestrator how to reach SurrealDB *inside* the compose network
      - SURREALDB_URL=memory
      - SURREALDB_NAMESPACE=unicity
      - SURREALDB_DATABASE=orchestrator
      - SURREALDB_USERNAME=${SURREALDB_USERNAME:-root}
      - SURREALDB_PASSWORD=${SURREALDB_PASSWORD:-root}

      # MCP HTTP bind inside container
      - MCP_BIND=0.0.0.0:3942

      # Logging
      - RUST_LOG=info,unicity_orchestrator=info
    ports:
      # Expose MCP HTTP to the host (for Inspector / client)
      - "3942:3942"
